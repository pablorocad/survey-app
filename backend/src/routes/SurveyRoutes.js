//======================================================================================
//Imports===============================================================================
//======================================================================================
const express = require('express');
const fs = require('fs');

let surveyData = require('../data/SurveyData.json');

//======================================================================================
//Configuration=========================================================================
//======================================================================================
const surveyRouter = express.Router();
const URL = '/survey'

//======================================================================================
//Endpoints=========================================================================
//======================================================================================
surveyRouter.get(URL,(req,res) => {
    res.json(surveyData);
});

surveyRouter.post(`${URL}`, (req,res) => {
    fs.writeFile('./src/data/SurveyData.json',
        `{"message":"mensaje"}`,
        (err) => {
            if(err){
                res.send(err);
            }
            res.json({message:'Guardado'})
        }
    );
});

module.exports = surveyRouter;